<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>理解离屏渲染 | fanthus&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.7">
    <link rel="icon" href="/logo.jpg">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/apple-touch-icon-152x152.png">
    <link rel="mask-icon" href="/icons/safari-pinned-tab.svg" color="#3eaf7c">
    <script async="true" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-3512514942188386" crossorigin="anonymous"></script>
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-MEH5F43SVB"></script>
    <script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-MEH5F43SVB');</script>
    <script>console.log("my name is fanthus, hope my blog bring new ideas to you.");</script>
    <meta name="description" content="本文关注如下几个问题

iOS 平台上离屏渲染的概念？
为什么需要离屏渲染？
离屏渲染到底好还是不好？能避免离屏渲染吗？如何优化？

之前聊聊iOS渲染这篇文章里介绍了正常情况下渲染视图的架构方式，如图，那什么是离屏渲染？
 ...">
    <meta name="theme-color" content="#3eaf7c">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="msapplication-TileImage" content="/icons/msapplication-icon-144x144.png">
    <meta name="msapplication-TileColor" content="#000000">
    
    <link rel="preload" href="/assets/css/0.styles.232103a7.css" as="style"><link rel="preload" href="/assets/js/app.2cedb1d8.js" as="script"><link rel="preload" href="/assets/js/29.309f71c0.js" as="script"><link rel="preload" href="/assets/js/3.e78f3171.js" as="script"><link rel="preload" href="/assets/js/16.3d596c76.js" as="script"><link rel="prefetch" href="/assets/js/10.4cd31608.js"><link rel="prefetch" href="/assets/js/100.3443112a.js"><link rel="prefetch" href="/assets/js/101.e0037931.js"><link rel="prefetch" href="/assets/js/102.f4c7589f.js"><link rel="prefetch" href="/assets/js/103.0df46cd4.js"><link rel="prefetch" href="/assets/js/104.17a0ee44.js"><link rel="prefetch" href="/assets/js/105.57832bba.js"><link rel="prefetch" href="/assets/js/106.680eda55.js"><link rel="prefetch" href="/assets/js/107.410f297e.js"><link rel="prefetch" href="/assets/js/108.fb80d3ad.js"><link rel="prefetch" href="/assets/js/109.699c7520.js"><link rel="prefetch" href="/assets/js/11.7393e510.js"><link rel="prefetch" href="/assets/js/110.d4f0aca9.js"><link rel="prefetch" href="/assets/js/111.372545eb.js"><link rel="prefetch" href="/assets/js/112.bc127403.js"><link rel="prefetch" href="/assets/js/113.414e616f.js"><link rel="prefetch" href="/assets/js/114.d8c4fe8d.js"><link rel="prefetch" href="/assets/js/115.279ec90c.js"><link rel="prefetch" href="/assets/js/116.c60ac54a.js"><link rel="prefetch" href="/assets/js/117.15c04390.js"><link rel="prefetch" href="/assets/js/118.f9d8228c.js"><link rel="prefetch" href="/assets/js/119.719d77b5.js"><link rel="prefetch" href="/assets/js/12.c35fa779.js"><link rel="prefetch" href="/assets/js/120.cf48f47a.js"><link rel="prefetch" href="/assets/js/121.4aad0ac7.js"><link rel="prefetch" href="/assets/js/122.15f2b5ef.js"><link rel="prefetch" href="/assets/js/123.4dea98c9.js"><link rel="prefetch" href="/assets/js/124.0152be90.js"><link rel="prefetch" href="/assets/js/125.ecf56222.js"><link rel="prefetch" href="/assets/js/126.50fe6660.js"><link rel="prefetch" href="/assets/js/127.28abe492.js"><link rel="prefetch" href="/assets/js/128.48a0862c.js"><link rel="prefetch" href="/assets/js/129.77b2b203.js"><link rel="prefetch" href="/assets/js/13.35658260.js"><link rel="prefetch" href="/assets/js/130.d0ef4952.js"><link rel="prefetch" href="/assets/js/131.55b00f57.js"><link rel="prefetch" href="/assets/js/14.4e33e6a2.js"><link rel="prefetch" href="/assets/js/15.345a84a1.js"><link rel="prefetch" href="/assets/js/17.3e2e1a7a.js"><link rel="prefetch" href="/assets/js/18.c8e88810.js"><link rel="prefetch" href="/assets/js/19.f0e3f187.js"><link rel="prefetch" href="/assets/js/20.cb5c866b.js"><link rel="prefetch" href="/assets/js/21.b83191ac.js"><link rel="prefetch" href="/assets/js/22.bea483cb.js"><link rel="prefetch" href="/assets/js/23.3877c278.js"><link rel="prefetch" href="/assets/js/24.0524a7e6.js"><link rel="prefetch" href="/assets/js/25.3f3c78fe.js"><link rel="prefetch" href="/assets/js/26.3f72710f.js"><link rel="prefetch" href="/assets/js/27.f35bb8e9.js"><link rel="prefetch" href="/assets/js/28.5e29b9fe.js"><link rel="prefetch" href="/assets/js/30.a60200be.js"><link rel="prefetch" href="/assets/js/31.c2accd33.js"><link rel="prefetch" href="/assets/js/32.41be2bbb.js"><link rel="prefetch" href="/assets/js/33.8447af66.js"><link rel="prefetch" href="/assets/js/34.122a4606.js"><link rel="prefetch" href="/assets/js/35.fa9f0fe8.js"><link rel="prefetch" href="/assets/js/36.ffc459c1.js"><link rel="prefetch" href="/assets/js/37.12421aeb.js"><link rel="prefetch" href="/assets/js/38.66884bf5.js"><link rel="prefetch" href="/assets/js/39.4901c209.js"><link rel="prefetch" href="/assets/js/4.41416bc4.js"><link rel="prefetch" href="/assets/js/40.726f0f90.js"><link rel="prefetch" href="/assets/js/41.1466329e.js"><link rel="prefetch" href="/assets/js/42.ad110115.js"><link rel="prefetch" href="/assets/js/43.42f6c87f.js"><link rel="prefetch" href="/assets/js/44.38a3ffda.js"><link rel="prefetch" href="/assets/js/45.54729d58.js"><link rel="prefetch" href="/assets/js/46.688f019f.js"><link rel="prefetch" href="/assets/js/47.069217c5.js"><link rel="prefetch" href="/assets/js/48.0227b0c3.js"><link rel="prefetch" href="/assets/js/49.7a3d3511.js"><link rel="prefetch" href="/assets/js/5.9be8c1b7.js"><link rel="prefetch" href="/assets/js/50.35d1d592.js"><link rel="prefetch" href="/assets/js/51.7e7b901a.js"><link rel="prefetch" href="/assets/js/52.f693d3ed.js"><link rel="prefetch" href="/assets/js/53.c4c4d1a2.js"><link rel="prefetch" href="/assets/js/54.eab66332.js"><link rel="prefetch" href="/assets/js/55.7e80dbb1.js"><link rel="prefetch" href="/assets/js/56.1041c5f3.js"><link rel="prefetch" href="/assets/js/57.a7c1bc68.js"><link rel="prefetch" href="/assets/js/58.c07c376a.js"><link rel="prefetch" href="/assets/js/59.8b20d651.js"><link rel="prefetch" href="/assets/js/6.1724a888.js"><link rel="prefetch" href="/assets/js/60.417e91a2.js"><link rel="prefetch" href="/assets/js/61.4db451fd.js"><link rel="prefetch" href="/assets/js/62.8f0bdaac.js"><link rel="prefetch" href="/assets/js/63.911f46a9.js"><link rel="prefetch" href="/assets/js/64.60deeb3e.js"><link rel="prefetch" href="/assets/js/65.201e0e08.js"><link rel="prefetch" href="/assets/js/66.248f04bf.js"><link rel="prefetch" href="/assets/js/67.500ae9a1.js"><link rel="prefetch" href="/assets/js/68.a95fd5e5.js"><link rel="prefetch" href="/assets/js/69.24aaae86.js"><link rel="prefetch" href="/assets/js/7.934b58e4.js"><link rel="prefetch" href="/assets/js/70.ec2f6ce6.js"><link rel="prefetch" href="/assets/js/71.b454fdd6.js"><link rel="prefetch" href="/assets/js/72.74299778.js"><link rel="prefetch" href="/assets/js/73.3cd8645d.js"><link rel="prefetch" href="/assets/js/74.d5accf5c.js"><link rel="prefetch" href="/assets/js/75.2d01044b.js"><link rel="prefetch" href="/assets/js/76.f31f74e1.js"><link rel="prefetch" href="/assets/js/77.3b826970.js"><link rel="prefetch" href="/assets/js/78.b7547141.js"><link rel="prefetch" href="/assets/js/79.5d0ef470.js"><link rel="prefetch" href="/assets/js/8.2a195ce5.js"><link rel="prefetch" href="/assets/js/80.0b0b5a17.js"><link rel="prefetch" href="/assets/js/81.24f2588e.js"><link rel="prefetch" href="/assets/js/82.f8c84af4.js"><link rel="prefetch" href="/assets/js/83.7fff9a1b.js"><link rel="prefetch" href="/assets/js/84.c0208c2c.js"><link rel="prefetch" href="/assets/js/85.e363b25e.js"><link rel="prefetch" href="/assets/js/86.5837e9f1.js"><link rel="prefetch" href="/assets/js/87.3e2f38a0.js"><link rel="prefetch" href="/assets/js/88.d3958f6f.js"><link rel="prefetch" href="/assets/js/89.ec3fdee0.js"><link rel="prefetch" href="/assets/js/9.c0adb174.js"><link rel="prefetch" href="/assets/js/90.94654c43.js"><link rel="prefetch" href="/assets/js/91.76b106e7.js"><link rel="prefetch" href="/assets/js/92.69e5bf8b.js"><link rel="prefetch" href="/assets/js/93.3d4a8f29.js"><link rel="prefetch" href="/assets/js/94.202d1036.js"><link rel="prefetch" href="/assets/js/95.002d5790.js"><link rel="prefetch" href="/assets/js/96.044893c5.js"><link rel="prefetch" href="/assets/js/97.c6dec31d.js"><link rel="prefetch" href="/assets/js/98.20673f07.js"><link rel="prefetch" href="/assets/js/99.fa4a2cf2.js"><link rel="prefetch" href="/assets/js/vuejs-paginate.91ff346d.js">
    <link rel="stylesheet" href="/assets/css/0.styles.232103a7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div id="vuepress-theme-blog__global-layout"><section id="header-wrapper"><header id="header"><div class="header-wrapper"><div class="title"><a href="/" class="nav-link home-link">fanthus's blog </a></div> <div class="header-right-wrap"><ul class="nav"><li class="nav-item"><a href="/" class="nav-link">Blog</a></li><li class="nav-item"><a href="/tag/" class="nav-link">Tags</a></li></ul> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></div></header></section> <div id="mobile-header"><div class="mobile-header-bar"><div class="mobile-header-title"><a href="/" class="nav-link mobile-home-link">fanthus's blog </a> <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-menu"><line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line></svg></div> <div class="mobile-menu-wrapper"><hr class="menu-divider"> <ul class="mobile-nav"><li class="mobile-nav-item"><a href="/" class="nav-link">Blog</a></li><li class="mobile-nav-item"><a href="/tag/" class="nav-link">Tags</a></li> <li class="mobile-nav-item"><!----></li></ul></div></div></div> <div class="content-wrapper"><div id="vuepress-theme-blog__post-layout"><article itemscope="itemscope" itemtype="https://schema.org/BlogPosting" class="vuepress-blog-theme-content"><header><h1 itemprop="name headline" class="post-title">
        理解离屏渲染
      </h1> <div class="post-meta"><!----> <div class="post-meta-date"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-clock"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg> <time pubdate itemprop="datePublished" datetime="2024-03-01T09:56:18.000Z">
      Fri Mar 01 2024
    </time></div> <ul itemprop="keywords" class="post-meta-tags"><li class="post-tag" data-v-42ccfcd5><a href="/tag/iOS" data-v-42ccfcd5><span data-v-42ccfcd5>iOS</span></a></li></ul></div></header> <div itemprop="articleBody" class="content__default"><p>本文关注如下几个问题</p> <ul><li>iOS 平台上离屏渲染的概念？</li> <li>为什么需要离屏渲染？</li> <li>离屏渲染到底好还是不好？能避免离屏渲染吗？如何优化？</li></ul> <p>之前<a href="https://fanthus.github.io/2024/02/29/%E8%81%8A%E8%81%8Aios%E6%B8%B2%E6%9F%93/" target="_blank" rel="noopener noreferrer">聊聊iOS渲染<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>这篇文章里介绍了正常情况下渲染视图的架构方式，如图，那什么是离屏渲染？</p> <p><img src="/assets/img/Untitled.d5f22107.png" alt="Untitled"></p> <h3 id="离屏渲染"><a href="#离屏渲染" class="header-anchor">#</a> 离屏渲染</h3> <p>离屏渲染这个概念不光是 iOS 独有的，Windows 上也有<a href="https://microsoft.github.io/Win2D/WinUI3/html/Offscreen.htm" target="_blank" rel="noopener noreferrer">类似的概念<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>。</p> <p>离屏渲染的过程是**「GPU 因为一些原因，没办法把渲染出来的结果直接输出给帧缓冲器(frame buffer)，而是先暂存在别的内存区域，之后再写入帧缓冲区」。**</p> <p>即正常流程是这样子的</p> <p><img src="data:image/png;base64,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" alt="Untitled"></p> <p>离屏渲染后</p> <p><img src="/assets/img/Untitled_2.512d4e01.png" alt="Untitled"></p> <blockquote><p>一个误区：我们通过在 drawRect 里面进行的绘制，并不是离屏渲染，那儿的绘制主要是通过 Quartz2D 图形库在 CGContext 维护的内存(backing store)里进行的绘制。距离 UIKit 工程师说的真正的 GPU 离屏渲染还差的远呢。参考  <a href="https://zhuanlan.zhihu.com/p/72653360" target="_blank" rel="noopener noreferrer">即刻技术-关于iOS离屏渲染的深入研究<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></p></blockquote> <h3 id="为什么需要离屏渲染"><a href="#为什么需要离屏渲染" class="header-anchor">#</a> 为什么需要离屏渲染</h3> <p>先说正常的渲染方式，在<a href="https://fanthus.github.io/2024/02/29/%E8%81%8A%E8%81%8Aios%E6%B8%B2%E6%9F%93/" target="_blank" rel="noopener noreferrer">上篇文章<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>里我们提到一个重要的渲染过程的参与者「渲染服务器」，主要的渲染操作就是渲染服务器拿到 CoreAnimation 提交的图层树(layer tree)并解码后，通过 OpenGL 或者 Metal 提交命令去让 GPU 渲染对应的图层。</p> <p>具体的渲染方法是参考「画家算法」，GPU 一层层的渲染，并且将渲染结果放到帧缓冲器里，后面绘制结果会覆盖掉前面的结果，而每一层绘制完之后这一层的内容就会被丢弃。这意味着整个渲染的过程是不可逆的。</p> <blockquote><p>PS：没找到 iOS 官方说明的渲染方法，可能画家算法是业内通用的 GPU 绘制方式？</p></blockquote> <p>需要离屏渲染的原因就是普通的画家算法不能满足一些绘图的场景，比如下图这种互相遮挡的绘图场景，我应该先绘制谁呢？好像先绘谁也不好使。</p> <p><img src="/assets/img/Untitled_3.fe901adb.png" alt="Untitled"></p> <h3 id="离屏渲染到底好还是不好-能避免离屏渲染吗"><a href="#离屏渲染到底好还是不好-能避免离屏渲染吗" class="header-anchor">#</a> 离屏渲染到底好还是不好？能避免离屏渲染吗？</h3> <p>离屏渲染相对于普通的渲染流程来说肯定是更加消耗资源的，需要单独分配和管理内存，而且打乱了原始的 GPU 设计好的渲染管线流程。最后将内存中的 OffscreenFrameBuffer 拷贝到待显示的 FrameBuffer 这一步也是消耗 CPU 资源的。</p> <p><strong>但是有的时候离屏渲染是不可避免的，有一些效果就是需要离屏渲染才能做到。这时候我们能做的就是尽量降低离屏渲染带来的性能损耗。</strong></p> <p><code>CALayer</code> 提供了一种优化方案就是「光栅化」。<code>CALayer</code> 提供了属性 <code>shouldRasterize</code> 来让开发者设置光栅化开关。光栅化的效果是让渲染服务器(render server)将layer的渲染结果缓存起来，这样被缓存起来的内容可以再进行复用，从而减少离屏渲染次数，提升性能。</p> <blockquote><p>光栅化是指将基于矢量的图像或对象转换为位图格式的过程。它涉及将形状和线条的数学描述转换为像素网格。</p></blockquote> <p>当然如果 CALayer 的其他属性修改影响了最终的渲染效果，之前缓存好的内容会被丢弃。所以优化离屏渲染的最佳场景是 CALayer 为静态内容的情况。</p> <p>iOS 模拟器提供了识别离屏渲染机制的方式，通过打开模拟器的 <code>Debug → Color Off-screen Rendered</code> 的选项，就能查看当前视图是否被离屏渲染了。</p> <blockquote><p><strong>Color Off-screen Rendered</strong>-Simulator overlays content in yellow that is rendered offscreen. Only use off-screen rendering when you have confirmed with tests that the memory and performance tradeoffs work for your app.</p></blockquote> <p>我们知道 <code>CALayer</code> 的一些常见属性是能触发离屏渲染的</p> <ol><li><p>阴影(shadow)相关的属性。</p> <div class="language-swift extra-class"><pre class="language-swift"><code>btn<span class="token punctuation">.</span>layer<span class="token punctuation">.</span>shadowOffset <span class="token operator">=</span> <span class="token class-name">CGSize</span><span class="token punctuation">.</span><span class="token keyword">init</span><span class="token punctuation">(</span>width<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">)</span>
btn<span class="token punctuation">.</span>layer<span class="token punctuation">.</span>shadowColor <span class="token operator">=</span> <span class="token class-name">UIColor</span><span class="token punctuation">.</span>black<span class="token punctuation">.</span>cgColor
btn<span class="token punctuation">.</span>layer<span class="token punctuation">.</span>shadowRadius <span class="token operator">=</span> <span class="token number">5</span>
btn<span class="token punctuation">.</span>layer<span class="token punctuation">.</span>shadowOpacity <span class="token operator">=</span> <span class="token number">1</span>
</code></pre></div><p>在模拟器上展示效果如下，可以看到整个视图都被黄色覆盖，说明视图被离屏渲染了。</p> <p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAACLCAYAAADBL0QZAAABXmlDQ1BJQ0MgUHJvZmlsZQAAKJFtkLFLAmEYxp9TQwqhhogGB4OIBgu7HFz1kgoMDksoh+DuNA3O8+PuJNoaahdqaRMb6i+wpaHWloKgQUIa2yOXkuv9tDqtvo+X58fD+768PIAnoDCm+wCUDNtMLydCm1vZkP8FXngwjBiCimaxuCynqAXfOvjajxC4PszxXefJViO7vTY7Jd3U0sXb5t/+gTeSy1sa6QeVqDHTBoQIsbxnM84HxOMmHUV8wrnQ4wvOao+vuj0baYn4nnhMKyo54mfisNrnF/q4pFe0rxv49YG8kVknnaAKYglJpOiHkIGIKBaoViij/2ei3RkJZTDsw8QuCijCpuk4OQw68sSrMKBhHmFiERG+l2f9O0PXK9eB2BvgrbqeegpcHgGTTdebrgGjh0Djjimm8pOs0PZZO4tijwMJYKjlOK8zgP8Y6FQd573uOJ0z2v8EXBufQKZkR6oRJTwAAAA4ZVhJZk1NACoAAAAIAAGHaQAEAAAAAQAAABoAAAAAAAKgAgAEAAAAAQAAASCgAwAEAAAAAQAAAIsAAAAAZ+tYrwAAGm9JREFUeAHtndd2G0mShhOOVpRESZQoR4lys909Pd297mKv9ln2FfbR9uyZ2z1nr9bMdM+2mVbLe1IiKYqUaGA3/gwEMmEI0QCFAvDnOYVyWVmZf1V+iIisApxjogJUgApQASpABajAuCmQaWkw1lunlixcpQJUgAocSYGa5G6dfAExgLCclSkvU6E+x3qcR1aZqAAVoAKHVgDgqcpUlqlUn2Md2z1sMEcCaACfGZnm6nOACBBiogJUgAocRwHABuDZkWm7Psd6RwABOHO1Wu2ZzJmoABWgAj1TIJPJ3JDCzAry5cbWTWwB9eykLIgKUAEqUFcA3hW8rEZYpxVAOdkJK4iJClABKtBrBcAWMKYjgOxkMZRsG+dUgApQgZMq0MaWtg0nPQOPpwJUgAocVgEC6LBKMR8VoAI9V4AA6rmkLJAKUIHDKkAAHVYp5qMCVKDnChBAPZeUBVIBKnBYBQigwyrFfFSACvRcAQKo55KyQCpABQ6rAAF0WKWYjwpQgZ4rQAD1XFIWSAWowGEVwHsZPUlb6//hPn74vidlsRAqQAWcu3Bl2U1MTadIii+kLks9rU/PALS+8m9u/fUfe1o5FkYFxleBjDt/+Z+l+Xh/My2pt/BBq+iCpeXash5UYAwVIIDG8KKzyVQgLQoQQGm5EqwHFRhDBQigMbzobDIVSIsCBFBargTrQQXGUAECaAwvOptMBdKiQM+G4dPSINaDCoyOAjUnfxBx7ObIj8Af+9ikDiSAklKa56ECR1TgBOzxZ4rh1cyi9ICJADriTcHsVCAxBYRAMUSOet4YOrVaDJ2a033xtqOW3pv8BFBvdGQpVKDnClQFQNXq0V0wA09sQdk2A4/u07IH6aoRQD2/bVggFeiNArB+ajX8sejRUgBPpm7phOOxrx1GsIgGYw0RQOHacIkKpEqBSqXqMB01BZgEVyuT6QQZAApWUMa7euG4o57x+PkJoONrxyOpQF8VqFQqrlwuH+EcweIxmMTzbBZWjkLHtptFhHVYXLb9CCc9UVYC6ETy8WAq0D8FPHyyhweQwcPiPJhjm021WraxrPuCO4ZWIF/SECKA+nf/sGQqcCIFisWyq7rSocow+CCzAsfmGZfNKniy2Zosx+tqEcUnSBpCBFCsPpepQIoUKBZLrtI0fH5w5QxArVYP4GPQ0eWsy+UAIrwEgX2hzBg+SVlCBFDQn0tUIFUK7O8XXabcfRgewNGk8R+1ftTtMvDkcgBNTsAD+GTFzcrJes3lpffj+SBsi+FjJSYBIQLI1OacCqRMgb3dfedylc/WKlg/BqFg9Sh0AJ+KACcnzxXlfJwnl8v5cnUbgs/NoLMyP3vyE2YggE4oIA+nAv1SYHdvz9UyCormczTMHr/Z3C6J+ohlY9aPWjsAECCTF3OnWq3KHM8WaWmATLWq0MIc7lhS4LH2EECmBOdUIGUK7OzsSxA6CtJ0qJ/Bx8ChAGqHT6FQFdjkvfWDYuLjcCwsILhjcLssWZm23o85AdQPVVkmFeiBArviglUCD6ISWy0gc710hAsQMterUMiL1QP4YNLCFDiWF9vVclIAaVnRyfq6SAD1VV4WTgWOq0DN7e7uuVKHEBCsF7hblgJQFCQY4VLXKy9PUlccrB+zbMxCQp5KRfNVq1kPJ40DqSWk57Az9G9OAPVPW5ZMBU6kwN5eUQDU0QSScrsDSOM+FYEMYj/B8rGh+HweAMrJVBVYATo2wT3Dsrpp2oBwrhM1qMPBBFAHUY67KSNDnfMXL3n/2srApa/K4/S7nz66/Z0d2zzU89PnzrvC5KTbfr/hihIo7ZamZk+52dOnfft3tra6ZeW+SAHcN/v7JbdfOvhdMIvRWDxH4QL3C2DpDB8LSpfLCEirZQT3DE9Jy6B83VJS4Fg4qJ/WEAEUXfSTLk5OT7nlr75xmfjpLhQqV7JcLrm1Vy/c68cPXFVujqFNcjdeuLbkzl264tbfvHRPfvrLwU2RvJeXb8sf7F1z714+dc+2fj44L/e0KfA5AOEAdb90DvdK3S+8xKpuFfLYdlhF5TImuGUVsYw0NqTWj79Nkb3F+vGb+vZBAPVB2rVXz93q86e+ZNwQkzMz7syFi27x5m2BU8a9uP+r7FOzuA+nT6zIuflzvm0HWXbTYv2cXbiUWH1G7USlUtkViwdbQNZeQEghowBSy0a7tu7DUDwsogAduF4WmA7uF+5Jm/rndlm9MSeAYjV6tFwuldzux+1GaZ+2PrjNd28dOuS5S5fd2xfPvDuWyxdczX8LyTfSxKTLium8v7srxwU45QsFl5NnOHDDlIvyYFrHlBGXaEJuQpjeZclX7JgrX5jwZeHGK+2jrHCe+IBc/Zyom+aL99pyTf63fMbBHXt3gGt5VtxRtKlbgisHi7EibmpFdGMKCpQkAl0stlvLsUukFhBGrhRCIZ6jMRx8AQI+cLlwDxmEYujA1cL6IBIBlJDqcLs21966K7fuOUClIjC48+3fug/ra/JNVHELV677Dv3o//7kPqy9k06Zc5eWbrhzi1fc5PSM/7b6IMfD7dne2GjUGh346p17bm5e4jICMdxg79++ceuvXjqADwkQWLyx7OYFfhNT0/5m236/LmW9cptvVxtlIXi1cO26uyB1mZJz4qbc2ljz+VCnOO1JTAvQuHj9plt7/cqDNN4P2J1fvOrWX790py8sxLv8Mupx9c5dX2/kLQk011+/cG9fPj8QoG2FjPgGBcbBb8MDOkiZjD75bM/x4LphH6CTyyl4cI+p1aO/sojANCYDEcqJGWRlYHs/EwHUT3Vbysa3ERIsFQxiTM6ccudh+cj65rsV3/H2dj75r66rt++6SzduuferryV29NzlJR+spzPnF9yD7//b7Wxve8vh+r0vvJuz+vyJt7oAqwtXr7tTZ+bdgz//j3TsfXH9lt2V5Xvu3atnPnCcnxA4SAzn5pdfu4fS8T9uvpdaZQSOdyTfXQHlqgcH8s2LC7X8+2/do7/8yR/rGyAf+L588/SRu/31d1KnC97Cs32Yn1lY8O4ZYl6npc5xAjSXf/+Nmz4159uGQPbU7KzU846bkm1Pf/5R4mQHd7y4rFFe7g4ggw+sHw0iYzgdBifgg2MBH4vzKHBsPYDHAIQ5rqqu+1swEWkJoERklld6xOqZPXPWuxm7Hz+iv/sEq+Xxj9+L1bMm62oGz4lbc3Hpplt58kCC1o/kptA4wAdx4+58+/fuyu177uEPf3ZTM7Pu7MVFCfA+c68ePmgcv7O9JTGnBYHWhNyIZbGirrrtzQ33/P5fG5bK9sa6WDtLYh0pFGfm5sRKuiUWyFP34rdfG/ner75pnPP+//6XVrr+ifNgdG9e6rAJC6nxFZoR1+yC+/ThvdsSC8/dbTpMrKYb7tTZeQlg/+A2Vt7Ud2bE/dxx1+5+KRbVC7fl9Wg+btzWzGppbXfd8JHN4QFEgAPwwUOFCh2bB4sHl0cnG+1qLTm6hO27+rKl+3PefTnl6Bc6OT0tsDnjp1Nnz/oOevsP34m7ccGtPH/syqUQo4Fbpe6NwgfqIK4it5a4UqsN+GD7J+nwAMnM3Gk/DA644I6anp3zFoRRDeU9//WXRhwK7h8so9MSNLY8gCDybK2vo2ixWC56V82fU2I/lpAPsEL8anJm2jb7OWJNqP8ZsZImxaWyNDc/711HuHfoDHGCO4iAPOq4sbIS7aqJq/daYk577oKMmjHh0gIUsG6aJ7NqsD12pbDdtumxZtE0z6VkLy9gNOhEC6gPV2Be3Bt0SktwsdCx3jx96FafPrHNft4+JJ/xsEBgFrGd1oTnaiyYvC/u2oq4QbCIvvjHfxKYvPMWyUeBlIEF5b8V92zpi6/FkvkHcaPWxH3b8tPGqgDA34UZNzE5JafK+FgR4kVxQrwmK4FwWGsaJA971yTGc2lpWYbar4i19tDvgAWH9q6vvA4Z60u5XN63ryDW2d3v/q5tf0HqgfMxGYA6UwJWkAIE+/EOF9Zh9eC3fnQf2B+DSNa8rAE8B1tCSelPAPVB6c13EkORYLElWAoYTfLxHdt40FxuLPjw+CbDaBoCvXECALAPHRw3Fzo9gs0YEodlBBgg0L0qltbrRw/leHn+SILEOzIqhyFxxF3wXM7izSmxUlbEdfvNQ8ueXarIMyKxhYZz45ywgop7GKFrTti3IW4aAtxvXzxHFMEtXF2SbbBmiu2jYN5/0A7TCjOUDHdy9yMfWFSVAQyFhq6HT4OIBaKxB/eDJgML5the3+qXQ556Zj+zPPG2JJYJoD6ojBGi97AujpPkTgCs8PQ04NCp07cWC3dG3TixnsRNuizPG128vuzBtCFuDRKeQrYnkRGPunh9SUD1O4e6vnwg55H4C2D1RuJOPkbVehJbDwEI3SL1RaAcDybOirs5Jc88IWCuo2t2s9vBiFHIaIyc59PWpncBD+pg4YjxXQIUAlRiHTT2A+0MHMinl6Zd8/hILCOvlq17rIzWfEmsMwaUhMpHPMfHD5vi8hT8ax1Nh8oddm7xsgSob3jLAoFjDNVPSjBaU80/X4ThddxhcHOy4vJcWrrpLSQrC8/bvHv5UkbI9tTdEasL8SW4iu0PDmbEulmUEbmbviwrI55vv98UkG2L5XNd4lcLAp834uphZK09waL7sP7WzZ09J9bYqaYMeDwBAWqAjAkKHASTAJ5mnbC9dZ+WocA5qLzmUpJcowWUpNqHPBdcuG15/gaxHcRe8CwOYicITmNo/s2Th/51DtxUV+/8jcSbNt3qs8femgGM0Inhpu3KUD0eYsSwPOZvxF3bElcKo2MAGeI+/lkhKQijTgDD5eU7Hm6wqOCWwbW7LMPjcI18vEpg1ZowZL4mLufS776SXRmxbH6S+QE3u5xrTZ5Rml9YdDe/+oMfhkdMyj8+cOWam5PRM4wKysMITF0VAGhgCUFniwE1H4D7I+2JAErhFUJHf/bXnwQ2Gs+5IlDATYb3yQCalaePfa39SNb9nz0gEGCGa+Ofppbg9LNffvSwQcYX939xi1LGDXnuB3El/+SxzPGMztvnz3xZABbOiaH4xRu3/SS3uB/FwvNDLx/9Jvn0ZvcHtHy8X1319cDIHALT3dInsfCeCaQQr7ohwXG0Fw9e7m5/8EPzx3Zfu5105PcNAW06XIP4+6wg+0/LdE3MuB865O266cnP/yoPr/2xa55x2IlRKsQ5iv6Viu4txnM8uG0wmtU5ZbybMjE15cGB4HCn967gZmHYH8/0lCXwiwf78ABiUxL37ZQ8hwQ3B+UUJc5UlN+b6WSpoA14lACwwtRaP8R4UA7iR3GakGPwsOXep+b2oDy4hK1BeIBw9rTUW16SRNwL00GvkcTnGYdl3Bf//p+P3c5ey3Vsarw9B2R/u4PffsbPrxbkZdOcTHk3NVWQadJNT0+6mZlJNzs7LfMpP5+Wl6exfVIeDJ2YKMiU98ejDHuBFUHuEOj+Fzn7F001OMqKlPOt5Me3E0YZ/Hs3tICOouAh8rZ2ym6HtHbI9rzyo1QyehW/V9aeRwK7YnVglKprEgDoE89dc/mdaEO3duCdtE7vpR0E3YPKwrtmh63T52vNHMOoAIPQw3jVWGcqMCIKEEAjciHZDCowjAoQQMN41VhnKjAiChBAI3Ih2QwqMIwKEEDDeNVYZyowIgoQQCNyIdkMKjCMChBAw3jVWGcqMCIKEEAjciHZDCowjAoQQMN41VhnKjAiChBAI3Ih2QwqMIwKEEDDeNVYZyowIgoQQCNyIdkMKjCMChBAw3jVWGcqMCIKEEAjciHZDCowjAoQQMN41VhnKjAiChBAI3Ih2QwqMIwKEEDDeNVYZyowIgoQQCNyIdkMKjCMChBAw3jVWGcqMCIKEEAjciHZDCowjAoQQMN41VhnKjAiChBAI3Ih2QwqMIwKEEDDeNVYZyowIgr07H/BLl675c6cx/+OHZz8fzfK/1Ph/6urmOR/oaqVqqvIVJb/DC+Vyq5YxCR/wLcvf4jnJ1kulmQbJs1TKVdcWY7BsdWqloUy8S9/do6Da8E9VGA4FOj+p4TD0YbP1bJnAJo9c07+nfNq1/MBEh4+AI+AoyJ/yYvJ4JKVf8as7so/ZGb25G+Gd11RStsRMO3IH3ju7lbd3l7JTwBVqSQQkr8ixvH4J1Itu4o/4JTkP7rWhTupABUYvAJ0wQZ/DVgDKjC2ChBAY3vp2XAqMHgFCKDBXwPWgAqMrQIE0NheejacCgxegaEDUCbTLBrWM42NGVlu3s81KjCqCui9rjd86AOhtcPQF1IPoE7CmsS6r5043Y6xYzmnAsOsQKd7HNvatxug4i/q9LS8Z8PwvW5STO+wHGCj22zdhMcwP7bVOlyIXteQ5VGBQSugFr9CJ+4L3evVDqnu+fu5NxUWkJJbmwmwGFwCeHRb2G5iK9VDPnPBsD/k6aeALJsKDEaB+F63/mH3vH0hG6BCDa2vtPa5kCPZpVRZQM0khxAmpILGb6lrrALqflvGfjyIaCLjeCYqMKoKhC/krLf4rR/Y/R/moZ8094m4fw1GpVQBKEgAYRQkmGezKlTrPAiOC4Cj4Xrp09ahLC5RgVFVIIAlk2mGUHtfCf0J/SYtaaAA6qQDtukUi2tAyjTBCCI7l2to6d8HEwjxdYyGJFwYWQUUIvYlnM1mpW/kZMJc+4lBSPPEgEIf0z41aHkGCiCRodF+E7JdLIgJUcOUy2X9u2S5HN750ve+cJy+D4Yi+S5YQ1gujKwCuOeRrM+gj+Ry7f3FgKT5Wr/YdV1Fipd1S78/BwIgFQLukokXC6kiGHAAGxUW4upUrSqAIE4mgxdbM36C5aNWUL9lY/lUIB0KGFQMMnFfyedDn7Ht1q/sOJ1bP8TcJu2T/W7lQADU2qhmMYL5aKIZeHK5nMvn8cZ7sHoUPnC7snULiNZPq75cH1UF8GVt8LB+k5U+giknX9joLzrXPoTl4KJZv5MSfDmDUGnAAFJrp11ENSNNNIiYz+ddodAMn2xWf0sIQMLPexiY6IIN4lbiOZNXIHgOFu+xL2v0mUIh7wGk/UfhowAK4QyDkM0BoyTTAAGEhpq1YvRW8CCYFtMbQuJHy/ADZkgAFqwj/S0g/WEzwKduGPlyw7I/hB9UYKQUQB8wWNgXuLpXmXrfyXoAoe8oiBRG6FeYLK+5bgCQpXjZtvVrniiA0EYDg4mGxhq9dVn9VqM2xPO/nCgWDoBlefJ5/JhZzls+2B8AFIOoX7KxXCoweAWUGcENM6jEnsPERN5NTBRkAoCCRWSWkA3fqxuWvCuWKIC0kXrhzF0CUAwqsfkIuBQKBQ+fkFctn7L8JCssIky1mv66YgwgnMFAN/jbhDWgAr1XQOGDcmMAYTkEns0NUwAphNQastgQ8prXof0QfdGXWu+Xtu439uEjYQCFFih4RL4GgFQINRGrntb+9569daP5QHjs159yVZfM8qDkACE7j7l4ts45FRgFBWJ3Ce1RCJkFpHO4YBY7VTcMX+iYYAnFrpj1QYWNgigplQYGIC+b6AjgmgAKGIVMGO0KbhcsJFAdFpC5ZYCOxYbMUkLZtICSuoV4nqQVqBspjdNq/7F+ZKNc2lc0lKEAghvWagEZtEIZjWITWRgIgCCgAiKYfSpEzZM5n9d4jylgZmW53G79qNUTRsACeGj9mH6cj6ICagUZjOxLHHMNLJsrpu6WjiIHiyi2gND37HgoZTBKQrWBAEia6C0fwRCa6yPyWIaFA6CA2poUUCE2hLgPrJ945CuGDwPQSdw0PEd6FFAAaX8yiCiEmh/gVUsII2DNgWj0LQOWHW99L4lWDghAoCyaFygOK0dALPAJzVYhMwIdCGduV4j9BOvHjiGATAnOx0OB9n6kX9rmWulcwxr6RY6+pOv27piOhEEvPTZJ5aLunsxpARWN1QA+6iZBRFBYPn0lACGFT9VbR7kcoAP3q3XUy4Cj5aj7RdcrmSvJs6RFAfQVS1i2ySwbgxDmavGEuYFKj9FSrDybW9n9mCcOIDQCDQOEVLcgHiwgQMi2Ix9E1He/qiIegAMIIYaE5c7gqW9GYUxUYCQV0D4SN03dMGxBv4mnACJsV/ho31L3K85r5WJbEmkgADKRAIrWdgJCeK8L1pHCBxACbPQF1GbwdLZ2DExJCMhzUIFBKdAJEvE2Awv6UVjWgHO8zfZpX9S8SbVpYABCA9FwwALz5oTHydXCUQjZMnK1Wz60eJrV49p4KmDdyPpTPMdyDB3pff7LH9t1gmbJwgdnHCiAfJNFgFYIQUi1jmwfoIPc2I4FXdFtna0gn5kfVGDsFFCwaLNtOUAmhhLyGIBsWY9L7nPgALKGt0LIJIBACh2DD9ZtL+ZNK/EOLlOBMVQgeBP4IkdqhU6nbZbHH5DgRyoAZIIECKlb1gyaIKQBSXUKgieoG09FBVKugFk/oZoGGQMTXC4k2x5yJreUGgCZEAoXE0aFMJfMZIkFa4aR5eCcCoyjAu3QMRUUOs1f1p22Wf6k5qkCEBptcGkGSzdhISrdsKRuGJ4n7Qo0Q6ZTbdMAHqtX6gBkFTMQ2Xo8b4YT9nxe9Ph4LlOBcVCgWx9KS/tTC6BuAg2DsN3qz31UgAqoAj0E0JdS4iJ1pQJUYGQVuNXzlvUQQN/0vHIskApQgdFWwL99NdpNZOuoABVIqwIEUFqvDOtFBcZAAQJoDC4ym0gF0qoAAZTWK8N6UYExUIAAGoOLzCZSgbQqQACl9cqwXlRgDBQggMbgIrOJVCCtChBAab0yrBcVGAMFCKAxuMhsIhVIqwIEUFqvDOtFBcZAAQJoDC4ym0gF0qpAJwBV01pZ1osKUIGhVqCNLTGA8KteFZlKQ91EVp4KUIG0KgC2gDGNXxBsBVBZdu6ktfasFxWgAkOtANgCxjQAFP+UIGBUkGlGprn6HOsxpGSViQpQASpwaAXgdsHyAXy263Ose3csBhCWARv8RhDAgznW4zyyykQFqAAVOLQCsHYAG1g+AA/mWPdWUCtcsN46ySYmKkAFqMCxFQBsWqdjF8YDqQAVoAJUgApQASow3Ar8P4rQnhHDGxp5AAAAAElFTkSuQmCC" alt="Untitled"></p> <p>但是通过配置 shadowPath 属性可以避免离屏渲染</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">var</span> scale <span class="token operator">=</span> <span class="token class-name">CGAffineTransform</span><span class="token punctuation">.</span>identity
btn<span class="token punctuation">.</span>layer<span class="token punctuation">.</span>shadowPath <span class="token operator">=</span> <span class="token class-name">CGPath</span><span class="token punctuation">.</span><span class="token keyword">init</span><span class="token punctuation">(</span>rect<span class="token punctuation">:</span> <span class="token punctuation">.</span><span class="token keyword">init</span><span class="token punctuation">(</span>x<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span> y<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span> width<span class="token punctuation">:</span> <span class="token number">200</span><span class="token punctuation">,</span> height<span class="token punctuation">:</span> <span class="token number">60</span><span class="token punctuation">)</span><span class="token punctuation">,</span> transform<span class="token punctuation">:</span> <span class="token operator">&amp;</span>scale<span class="token punctuation">)</span>
btn<span class="token punctuation">.</span>layer<span class="token punctuation">.</span>shadowColor <span class="token operator">=</span> <span class="token class-name">UIColor</span><span class="token punctuation">.</span>black<span class="token punctuation">.</span>cgColor
btn<span class="token punctuation">.</span>layer<span class="token punctuation">.</span>shadowOpacity <span class="token operator">=</span> <span class="token number">0.5</span>
btn<span class="token punctuation">.</span>layer<span class="token punctuation">.</span>shadowRadius <span class="token operator">=</span> <span class="token number">5</span>
</code></pre></div><p><img src="data:image/png;base64,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" alt="Untitled"></p></li> <li><p>**透明度(opacity)相关属性。**多说一句，<code>UIView</code> 的 <code>alpha</code> 属性设置底层就是通过 <code>Layer</code> 的 <code>opacity</code> 实现的，所以这俩属性我理解除了语义上的区别之外，没啥差别。设置 <code>UIView</code> <code>alpha</code> 属性同样能触发离屏渲染的。这种透明度的设置是对整个子图层树都生效的，所以我理解这也是它需要离屏渲染的原因。</p></li> <li><p>有争议的圆角属性 <code>cornerRadius</code> 属性。<strong>最近的 iOS 系统中使用 <code>cornerRadius</code> 并不会触发离屏渲染。但一些使用场景需要注意</strong></p> <ol><li><p><code>cornerRadius</code> 本身并不会触发离屏渲染，<strong>但是如果结合 <code>masksToBounds</code> 属性的化就会触发离屏渲染，如图四个角会被标记为黄色。</strong></p> <p><img src="data:image/png;base64,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" alt="Untitled"></p></li> <li><p>有背景色也可以使用 <code>cornerRadius</code>。因为之前看<a href="https://zhuanlan.zhihu.com/p/72653360" target="_blank" rel="noopener noreferrer">即刻的技术文章<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>说，没有<code>backgroundColor</code> 可以使用 <code>cornerRadius</code>。我自己理解就算有 <code>backgoundColor</code> 也能用，但得知道是设置谁的 <code>backgroundColor</code>。</p> <p>看下面代码，当 ① ③ 组合的时候，<code>cornerRadius</code> 并不对背景色生效；当 ② ③ 组合的时候 <code>cornerRadius</code> 是对背景色生效。</p> <div class="language-swift extra-class"><pre class="language-swift"><code>① label<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token class-name">UIColor</span><span class="token punctuation">.</span>gray 
② label<span class="token punctuation">.</span>layer<span class="token punctuation">.</span>backgroundColor <span class="token operator">=</span> <span class="token class-name">UIColor</span><span class="token punctuation">.</span>gray<span class="token punctuation">.</span>cgColor
③ label<span class="token punctuation">.</span>layer<span class="token punctuation">.</span>cornerRadius <span class="token operator">=</span> <span class="token number">10</span>
</code></pre></div><p>因为 <code>UIView</code> 的 <code>backgoundColor</code> 本质上是给 <code>CALayer</code> 的 <code>contents</code> 属性填充内容。<code>CALayer</code> 的 <code>backgoundColor</code> 和 <code>contents</code> 属性不一样的。</p> <p><code>cornerRadius</code> 作用的是 <code>CALayer</code> 的 <code>backgoundColor</code> 和 <code>border</code>，而不对 <code>contents</code> 属性生效。上面两种都不会触发离屏渲染。</p></li> <li><p>有一些文章推荐使用 CoreGraphics 的方式来进行圆角绘制，如下</p> <div class="language-swift extra-class"><pre class="language-swift"><code><span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function-definition function">draw</span><span class="token punctuation">(</span><span class="token omit keyword">_</span> rect<span class="token punctuation">:</span> <span class="token class-name">CGRect</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> context <span class="token operator">=</span> <span class="token class-name">UIGraphicsGetCurrentContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token class-name">UIBezierPath</span><span class="token punctuation">(</span>roundedRect<span class="token punctuation">:</span> rect<span class="token punctuation">,</span> cornerRadius<span class="token punctuation">:</span> rect<span class="token punctuation">.</span>height <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">)</span>
    context<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">setFillColor</span><span class="token punctuation">(</span><span class="token class-name">UIColor</span><span class="token punctuation">.</span>gray<span class="token punctuation">.</span>cgColor<span class="token punctuation">)</span>
    path<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>不过我自己认为既然 <code>cornerRadius</code> 已经不会触发离屏渲染了，是否还有必要提前绘制圆角呢？这种场景我理解就是将绘制的过程前置让 CPU 提前对视图做了预处理，这样 GPU 就不用再做了。</p></li></ol></li></ol> <p>最后关于调试离屏渲染，离屏渲染消耗的时间并不会出现在 Instrument 的 TimeProfiler 工具里，因为这一层的渲染是 CoreAnimation 的 RenderServer 和 GPU 配合做的，和我们的 App并没有直接的关系。</p> <p>参考地址:</p> <ol><li><a href="https://zhuanlan.zhihu.com/p/157708445" target="_blank" rel="noopener noreferrer">知乎-离屏渲染<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://objccn.io/issue-3-1/" target="_blank" rel="noopener noreferrer">objcio-绘制像素到屏幕上<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.apple.com/library/archive/documentation/GraphicsImaging/Conceptual/OpenGL-MacProgGuide/opengl_offscreen/opengl_offscreen.html" target="_blank" rel="noopener noreferrer">Drawing Offscreen-OpenGL Programming Guide for Mac<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://zhuanlan.zhihu.com/p/72653360" target="_blank" rel="noopener noreferrer">即刻技术-关于iOS离屏渲染的深入研究<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html" target="_blank" rel="noopener noreferrer">Core Animation Programming Guide<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://developer.apple.com/library/archive/documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_context/dq_context.html#//apple_ref/doc/uid/TP30001066-CH203-SW9" target="_blank" rel="noopener noreferrer">Quartz 2D Programming Guide<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://www.bilibili.com/video/BV15q4y177xb/?vd_source=06c3d20715183a10b894274ffd31554c" target="_blank" rel="noopener noreferrer">WWDC14：Advanced Graphics and Animations for iOS Apps<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li><a href="https://asciiwwdc.com/2014/sessions/419" target="_blank" rel="noopener noreferrer">WWDC14: Advanced Graphics and Animations for iOS Apps 字幕版<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li> <li>[WWDC 2012 Polishing Your Interface Rotations](https://archive.org/details/wwdc-2012-sessions/[2012]+[Session+240]+Polishing+Your+Interface+Rotations.mov](https://archive.org/details/wwdc-2012-sessions/%5B2012%5D+%5BSession+240%5D+Polishing+Your+Interface+Rotations.mov)</li></ol></div> <footer><!----> <hr> <!----></footer></article> <div class="sticker vuepress-toc"><div class="vuepress-toc-item vuepress-toc-h3 active"><a href="#离屏渲染" title="离屏渲染">离屏渲染</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#为什么需要离屏渲染" title="为什么需要离屏渲染">为什么需要离屏渲染</a></div><div class="vuepress-toc-item vuepress-toc-h3"><a href="#离屏渲染到底好还是不好-能避免离屏渲染吗" title="离屏渲染到底好还是不好？能避免离屏渲染吗？">离屏渲染到底好还是不好？能避免离屏渲染吗？</a></div></div></div></div> <footer class="footer" data-v-3d9deeb8><div class="footer-left-wrap" data-v-3d9deeb8><ul class="contact" data-v-3d9deeb8></ul></div> <div class="footer-right-wrap" data-v-3d9deeb8><ul class="copyright" data-v-3d9deeb8></ul></div></footer></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.2cedb1d8.js" defer></script><script src="/assets/js/29.309f71c0.js" defer></script><script src="/assets/js/3.e78f3171.js" defer></script><script src="/assets/js/16.3d596c76.js" defer></script>
  </body>
</html>
