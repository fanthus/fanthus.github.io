(window.webpackJsonp=window.webpackJsonp||[]).push([[46],{312:function(e,v,o){e.exports=o.p+"assets/img/wechat_qrcode.c0c8a471.png"},400:function(e,v,o){e.exports=o.p+"assets/img/vscode_ide_node.43336e1d.png"},644:function(e,v,o){"use strict";o.r(v);var n=o(5),i=Object(n.a)({},(function(){var e=this,v=e._self._c;return v("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[v("p",[e._v("最近遇到一个关于 Node 版本的问题，解决过程中我重新认识了一下 Node 的版本管理，分享一下经历。")]),e._v(" "),v("p",[e._v("背景 - 我们的 iOS 工程提交代码是使用了一个叫 "),v("code",[e._v("Commitizen")]),e._v(" 的工具，这是一个标准化 git commit message 的工具，这个工具我之前是用过 "),v("code",[e._v("npm install -g")]),e._v(" 方式进行全局安装的。")]),e._v(" "),v("p",[e._v("问题 - 今天使用 "),v("code",[e._v("Commitizen")]),e._v(" 下的 "),v("code",[e._v("git cz")]),e._v(" 命令的时候突然报错说这个命令找不到了。")]),e._v(" "),v("blockquote",[v("p",[e._v("git: ‘cz’ is not a git command.")])]),e._v(" "),v("p",[e._v("很奇怪，然后我在终端下执行 "),v("code",[e._v("commitizen")]),e._v(" 命令，发现这个命令也找不到了…")]),e._v(" "),v("p",[e._v("于是我想到昨天似乎在起别的前端项目的时候执行过一句 "),v("code",[e._v("nvm alias default")]),e._v(" 这个命令改过 Node 的版本号码，是不是和这个有关系？")]),e._v(" "),v("p",[e._v("既然报错找不到 "),v("code",[e._v("commitizen")]),e._v(" 了，那我就重新装一下，于是重新执行命令 "),v("code",[e._v("npm install -g commitizen")]),e._v("发现了似乎安装过程和版本号有关系，是把 "),v("code",[e._v("commitizen")]),e._v(" 装到了指定的 node 版本号下的目录中去了。")]),e._v(" "),v("blockquote",[v("p",[e._v("➜  "),v("strong",[e._v("ios-project git:(develop) npm install -g commitizen")]),e._v("\n/Users/x/.nvm/versions/node/v14.21.3/bin/cz -> /Users/x/.nvm/versions/node/v14.21.3/lib/node_modules/commitizen/bin/git-cz\n/Users/x/.nvm/versions/node/v14.21.3/bin/git-cz -> /Users/x/.nvm/versions/node/v14.21.3/lib/node_modules/commitizen/bin/git-cz\n/Users/x/.nvm/versions/node/v14.21.3/bin/commitizen -> /Users/x/.nvm/versions/node/v14.21.3/lib/node_modules/commitizen/bin/commitizen")]),e._v(" "),v("ul",[v("li",[e._v("commitizen@4.3.0\nadded 168 packages from 184 contributors in 22.24")])])]),e._v(" "),v("p",[e._v("我昨天确实是通过 "),v("code",[e._v("nvm alias default")]),e._v(" 命令把 Node 版本改到了 v14.21.3，改之前我的 Node 版本是 v14.16.1, 于是我在 "),v("code",[e._v("/Users/x/.nvm/versions/node/v14.16.1/bin")]),e._v(" 下确实找到了 "),v("code",[e._v("commitize")]),e._v(",所以应该就是通过 "),v("code",[e._v("nvm alias default")]),e._v(" 改了全局的 Node 版本号，导致找不到原来 Node 版本下的 "),v("code",[e._v("commitizen")]),e._v(" 了。"),v("strong",[e._v("之前确实也没有关注到通过 npm install -g 这个命令还会区分不同的 Node 版本进行安装。")])]),e._v(" "),v("p",[e._v("回到昨天为什么要通过 nvm alias default 修改全局 Node 版本？是因为昨天运行一个前端项目报错，然后同事建议修改 Node 版本。")]),e._v(" "),v("p",[e._v("使用 VSCode 开启前端项目的时候一般会有两个地方执行 npm run dev 这种命令")]),e._v(" "),v("ol",[v("li",[v("p",[e._v("IDE 界面交互（应该是读取的 package.json 中的命令，变为可交互形式）。")]),e._v(" "),v("p",[v("img",{attrs:{src:o(400),alt:"vscode"}})])]),e._v(" "),v("li",[v("p",[e._v("在 VSCode 自带的命令行")])])]),e._v(" "),v("p",[e._v("这两个地方执行命令的时候使用的 Node 版本是不一样的，IDE 界面那儿使用的是全局的 Node 版本，而我总是通过 IDE 交互这样执行命令，同事建议我通过 "),v("code",[e._v("nvm alias default")]),e._v(" 命令将 Node 版本改成和前端工程匹配的 Node 版本。于是就引出了今天的问题，"),v("strong",[e._v("主要还是我自己没有搞清楚 Node 全局版本和工程下版本的区别。")]),e._v(" 而且尽量在前端工程下尽量使用命令行的方式去执行 npm 命令。")]),e._v(" "),v("p",[e._v("所以我简单总结一下 Node 版本管理的比较好的实践是：")]),e._v(" "),v("ol",[v("li",[e._v("尽量不要通过 "),v("code",[e._v("nvm alias default")]),e._v("   命令改 Node 全局的版本，因为会影响很多别的地方的使用。")]),e._v(" "),v("li",[e._v("在前端工程下如果当前系统默认 Node 版本不匹配，手可以通过 "),v("code",[e._v("nvm use")]),e._v(" 的方式进行版本切换，并尽量保证是通过命令行执行 npm 命令。")])]),e._v(" "),v("hr"),e._v(" "),v("p",[e._v("关注我的微信公众号，我在上面会分享我的日常所思所想。")]),e._v(" "),v("div",{attrs:{align:"center"}},[v("img",{attrs:{src:o(312),width:"40%/"}})])])}),[],!1,null,null,null);v.default=i.exports}}]);